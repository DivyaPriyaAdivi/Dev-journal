{% extends "blog/base.html" %}
{% block content %}

  {% if not user.is_authenticated %}
    <!-- Guest View -->
    <main class="flex-grow">
    <!-- IF user not signed in -->
     <section class="flex flex-col md:flex-row items-center  max-w-6xl mx-auto px-6 py- ">
  <!-- right side: Text content -->
 
  <!-- left side: Image -->
  <div class="max-w-md">
    <img src="../static/blog/bwink_edu_05_single_05.jpg" alt="Hero Image" class="w-full rounded-lg" />
  </div>
   <div class="flex flex-col space-y-3">
    <div class="mt-3 text-sm text-gray-500">
            clip articles â€¢ doodle your thoughts â€¢ document it
    </div>
    <h1 class=" text-5xl font-extrabold leading-tight tracking-tight text-gray-900 md:text-6xl lg:text-7xl">Dev Journal</h1>
    <h2 class="text-xl text-gray-600">Document your coding progress & overcome challenges with ease.</h2>
    <a href="{% url 'register' %}" class="mt-4 max-w-max bg-black text-white px-8 py-3 rounded-lg hover:bg-gray-800 transition">
      Get Started
    </a>
  </div>
</section>
   <section class="bg-white">
  <div class="mx-auto max-w-7xl px-6 py-16">
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      <!-- Card 1 -->
      <article class="rounded-2xl border border-gray-200 bg-white p-6 shadow-sm hover:shadow-md transition-shadow">
        <div class="mb-4 inline-flex h-10 w-10 items-center justify-center rounded-full bg-gray-900 text-white">1</div>
        <h3 class="text-xl font-semibold text-gray-900">Capture Challenges</h3>
        <p class="mt-2 text-gray-600">
          Log a problem, add context, and paste the code or error in seconds to build a reliable record of progress.
        </p>
      </article>

      <!-- Card 2 -->
      <article class="rounded-2xl border border-gray-200 bg-white p-6 shadow-sm hover:shadow-md transition-shadow">
        <div class="mb-4 inline-flex h-10 w-10 items-center justify-center rounded-full bg-gray-900 text-white">2</div>
        <h3 class="text-xl font-semibold text-gray-900">Organize & Tag</h3>
        <p class="mt-2 text-gray-600">
          Attach snippets, links, and screenshots, then tag by topic, stack, or difficulty for fast retrieval.
        </p>
      </article>

      <!-- Card 3 -->
      <article class="rounded-2xl border border-gray-200 bg-white p-6 shadow-sm hover:shadow-md transition-shadow">
        <div class="mb-4 inline-flex h-10 w-10 items-center justify-center rounded-full bg-gray-900 text-white">3</div>
        <h3 class="text-xl font-semibold text-gray-900">Review & Reflect</h3>
        <p class="mt-2 text-gray-600">
          Search past entries, track patterns, and note what worked so lessons compound over time.
        </p>
      </article>
    </div>
  </div>
</section>

  </main>

  {% elif user.is_authenticated and posts.count == 0 %}
    <!-- Logged in but no posts -->
    <div class="jumbotron text-center bg-light p-5 rounded">
      <h1 class="display-4">Hello {{ user.username }} ðŸ‘‹</h1>
      <p class="lead">Looks like your journal is empty.</p>
      <p>Start by logging your first error and its fix â€”  
      your journey begins here ðŸš€</p>
      <a class="btn btn-success btn-lg" href="{% url 'posts-create' %}">+ Make Your First Error Log</a>
    </div>

  {% else %}
    <!-- Logged in + has posts -->
     <aside class=" fixed top-16 left-0 w-64 h-[calc(100vh-4rem)] overflow-y-auto bg-white border-r border-gray-200">
    <!-- Brand / header -->
 

    <!-- Nav -->
    <nav class="p-3 ml-12" role="navigation" aria-label="Sidebar">
      <a href="" class="block px-3 py-2 rounded-md hover:bg-gray-50">Home</a>
      <a href="" class="block px-3 py-2 rounded-md hover:bg-gray-50">Profile</a>
      <a href="" class="block px-3 py-2 rounded-md hover:bg-gray-50">About</a>

      <!-- Logout as a form (recommended) -->
      <form method="post" action="">
        {% csrf_token %}
        <button type="submit" class="w-full text-left px-3 py-2 rounded-md hover:bg-gray-50">
          Logout
        </button>
      </form>
    </nav>
  </aside>

  <section class="max-w-7xl mx-auto p-6">
  <header class="mb-6">
    <div class="flex items-center justify-between gap-3 flex-nowrap">
    <h1 class="min-w-0 text-2xl font-bold text-gray-900 ">Posts</h1>

    <a href="{% url 'posts-create' %}"
       class="shrink-0 inline-flex items-center gap-2 rounded-md bg-gray-900 text-white px-4 py-2 hover:bg-gray-800">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 4.5v15m7.5-7.5h-15"/>
      </svg>
      <span>New post</span>
    </a>
  </div>
  </div>
  </header>
  <ul role="list" class="divide-y divide-gray-200  border-b  border-gray-200 ">
    {% for post in posts %}
      <li class="flex items-center justify-between gap-4 p-4">
        <div class="min-w-0">
          <h2> <a class="truncate font-semibold" href="{% url 'posts-detail' post.id %}">{{ post.title }}</a></h2>
          <time datetime="{{ post.created_at|date:'c' }}" class="text-sm text-gray-500">
            {{ post.date_posted|date:"F d, Y" }}
          </time>
        </div>
        <div class="flex items-center gap-2">
          <a href="" class="p-2 rounded hover:bg-gray-50" aria-label="Edit">
            <!-- pencil-square -->
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                d="M16.862 3.487a2.25 2.25 0 0 1 3.182 3.182L8.25 18.563 4.5 19.5l.938-3.75L16.862 3.487z" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                d="M19.5 7.5L16.5 4.5" />
            </svg>
          </a>
          <form method="post" action="">
            {% csrf_token %}
            <button type="submit" class="p-2 rounded hover:bg-gray-50" aria-label="Delete">
              <!-- trash -->
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                  d="M6 7.5h12M9.75 7.5V6.75A1.5 1.5 0 0 1 11.25 5.25h1.5A1.5 1.5 0 0 1 14.25 6.75V7.5m-6 0l.75 11.25A1.5 1.5 0 0 0 10.5 20.25h3A1.5 1.5 0 0 0 15.75 18.75L16.5 7.5" />
              </svg>
            </button>
          </form>
        </div>
      </li>
    {% empty %}
      <li class="p-6 text-gray-500">No posts yet.</li>
    {% endfor %}
  </ul>
</section>

    <!-- Pagination -->
    {% if is_paginated %}
      <nav>
        <ul class="pagination justify-content-center">
          {% if page_obj.has_previous %}
            <li class="page-item"><a class="page-link" href="?page=1">First</a></li>
            <li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number }}">Previous</a></li>
          {% endif %}

          {% for num in page_obj.paginator.page_range %}
            {% if page_obj.number == num %}
              <li class="page-item active"><a class="page-link" href="?page={{ num }}">{{ num }}</a></li>
            {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
              <li class="page-item"><a class="page-link" href="?page={{ num }}">{{ num }}</a></li>
            {% endif %}
          {% endfor %}

          {% if page_obj.has_next %}
            <li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number }}">Next</a></li>
            <li class="page-item"><a class="page-link" href="?page={{ page_obj.paginator.num_pages }}">Last</a></li>
          {% endif %}
        </ul>
      </nav>
    {% endif %}
  {% endif %}

{% endblock content %}
